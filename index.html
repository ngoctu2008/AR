<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>AR Xây Gạch - Quy trình cơ bản</title>
    <script src="https://aframe.io/releases/1.5.0/aframe.min.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <style>
      #controls {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 999;
      }
      button {
        padding: 10px 15px;
        font-size: 16px;
        margin-right: 10px;
        cursor: pointer;
      }
    </style>
  </head>

  <body style="margin: 0px; overflow: hidden;">
    <div id="controls">
      <button id="startButton">Bắt đầu mô phỏng</button>
      <button id="resetButton" style="display: none;">Đặt lại</button>
    </div>

    <a-scene embedded arjs>
      <a-marker preset="hiro">
        
        <a-box id="vua" 
          position="0 0.01 0" 
          width="0.25" height="0.02" depth="0.12" 
          material="color: #8B4513; opacity: 0;" 
          visible="false"></a-box>
        
        <a-box id="gach" 
          position="0 0.06 0" 
          width="0.25" height="0.08" depth="0.12" 
          material="color: #CD5C5C; opacity: 0;" 
          visible="false"></a-box>

        <a-entity id="canChinh" 
          position="0 0.11 0" 
          rotation="0 90 0" 
          visible="false">
          <a-plane width="0.3" height="0.005" color="#00FF00" opacity="0.7"></a-plane>
          <a-text value="Căn chỉnh!" position="0 0.05 0" align="center" color="#FFFFFF" scale="0.1 0.1 0.1"></a-text>
        </a-entity>

      </a-marker>

      <a-camera-static />
    </a-scene>

    <script>
      const startButton = document.getElementById('startButton');
      const resetButton = document.getElementById('resetButton');
      const vua = document.getElementById('vua');
      const gach = document.getElementById('gach');
      const canChinh = document.getElementById('canChinh');

      function resetSimulation() {
        vua.setAttribute('visible', 'false');
        vua.setAttribute('material', 'opacity: 0');
        gach.setAttribute('visible', 'false');
        gach.setAttribute('material', 'opacity: 0');
        canChinh.setAttribute('visible', 'false');
        startButton.style.display = 'block';
        resetButton.style.display = 'none';
      }

      function startSimulation() {
        startButton.style.display = 'none';
        resetButton.style.display = 'block';

        // Bước 1: Hiện lớp vữa
        vua.setAttribute('visible', 'true');
        vua.setAttribute('material', 'opacity: 1');
        console.log("Bước 1: Lớp vữa");

        setTimeout(() => {
          // Bước 2: Hiện gạch
          gach.setAttribute('visible', 'true');
          gach.setAttribute('material', 'opacity: 1');
          console.log("Bước 2: Đặt gạch");

          setTimeout(() => {
            // Bước 3: Hiện thanh căn chỉnh
            canChinh.setAttribute('visible', 'true');
            console.log("Bước 3: Căn chỉnh");
          }, 2000); 
        }, 2000); 
      }

      startButton.addEventListener('click', startSimulation);
      resetButton.addEventListener('click', resetSimulation);

      resetSimulation();
    </script>
  </body>
</html>
